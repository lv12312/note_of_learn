##4、优化Schema和数据类型

良好的逻辑和物理设计才是高性能的基石，对于特定的查询必须要设计合理的Schema才行。通常是一种权衡的做法，优化一个查询通常会影响其他的查询。
###4.1 挑选合适的数据类型

挑选数据类型的原则：

* 小一点通常更好；减少内存、减少CPU缓存耗时等等优势。
* 简单更好，尽量减少外键，跨表查询，减小数据库操作的复杂度。
* 尽量避免NULL操作，对于null的行来讲，数据库无法做到对其的查询优化。对于null的行的使用而言，会导致使用更多的内存和复杂的内部处理。


**对于CHAR和VARCHAR而言**

对于长度已知的字段而言，选择CHAR会更好，VARCHAR会使用一个或两个字节来存储VARCHAR的长度。对于VARCHAR(10)和VARCHAR(100)而言，'hello'字符串都是占用相同的空间，为啥不用大一点的字段呢？这样未来扩展不是更加灵活么？应该更长的字段会消耗更多的内存，通常MySQL通常会分配固定大小的内存来存储值。如果字段过大，内存消耗会更大。最好的内存分配策略就是使用合适的大小来做。

**BLOB和TEXT**
用来存储二进制数据和字符数据.

有些时候可以使用枚举来代替字符串类型。


###4.2 追求高性能和伸缩性下的Schema设计的原则

* 避免过多的字段
* 太多的join查询
* 避免ENUM的滥用
* 偶尔选择缓存或汇总数据